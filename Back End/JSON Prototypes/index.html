<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Display</title>
    <style>
        .recipe-card {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .recipe-card h2 {
            margin-top: 0;
        }
        .recipe-card button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .recipe-card button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div id="recipesContainer"></div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const selectedRecipe = urlParams.get('recipe');

        const recipesJson = `[{"name": "Bourbon Pecan Pancakes",
  "steps": [{ "equipment": [{ "id": 404784, "image": "oven.jpg", "name": "oven", "temperature": { "number": 200.0, "unit": "Fahrenheit" } }],
              "ingredients": [],
              "number": 1,
              "step": "Preheat the oven to 200 degrees F."
            },
            { "equipment": [{ "id": 404661, "image": "whisk.png", "name": "whisk" },
                            { "id": 404783, "image": "bowl.jpg", "name": "bowl" }],
              "ingredients": [{ "id": 19334, "image": "light-brown-sugar.jpg", "name": "light brown sugar" },
                              { "id": 19335, "image": "sugar-in-bowl.png", "name": "granulated sugar" }],
              "number": 2,
              "step": "Whisk together the flour, pecans, granulated sugar, light brown sugar, baking powder, baking soda, and salt in a medium bowl."
            }]
 },
 {"name": "Bourbon Molasses Butter",
  "steps": [{ "equipment": [{ "id": 404669, "image": "sauce-pan.jpg", "name": "sauce pan" }],
              "ingredients": [{ "id": 10014037, "image": "bourbon.png", "name": "bourbon" },
                              { "id": 19335, "image": "sugar-in-bowl.png", "name": "sugar" }],
              "number": 1,
              "step": "Combine the bourbon and sugar in a small saucepan and cook over high heat until reduced to 3 tablespoons, remove and let cool."
            },
            { "equipment": [{ "id": 404771, "image": "food-processor.png", "name": "food processor" }],
              "ingredients": [{ "id": 19304, "image": "molasses.jpg", "name": "molasses" }],
              "number": 2,
              "step": "Put the butter, molasses, salt and cooled bourbon mixture in a food processor and process until smooth."
            }]
 }
]`;
        const recipesData = JSON.parse(recipesJson);

        const recipesContainer = document.getElementById('recipesContainer');

        recipesData.forEach(recipe => {
            const recipeDiv = document.createElement('div');
            recipeDiv.classList.add('recipe-card');
            recipeDiv.innerHTML = `
                <h2>${recipe.name}</h2>
                <h3>Equipment:</h3>
                <ul>
                    ${recipe.steps.flatMap(step => step.equipment.map(equipment => `<li>${equipment.name}</li>`)).join('')}
                </ul>
                <h3>Ingredients:</h3>
                <ul>
                    ${recipe.steps.flatMap(step => step.ingredients.map(ingredient => `<li>${ingredient.name}</li>`)).join('')}
                </ul>
                ${getCookTime(recipe)}
                <button onclick="cookNow('${recipe.name}')">Cook Now</button>
            `;
            recipesContainer.appendChild(recipeDiv);
        });

        function getCookTime(recipe) {
            const cookTimeStep = recipe.steps.find(step => step.duration);
            if (cookTimeStep) {
                const { number, unit } = cookTimeStep.duration;
                return `<p>Estimated Cook Time: ${number} ${unit}</p>`;
            } else {
                return '';
            }
        }

        function cookNow(recipeName) {
            // Redirect to the selection page with the selected recipe
            window.location.href = `recipe-details.html?recipe=${recipeName}`;
        }
    </script>
</body>
</html>
